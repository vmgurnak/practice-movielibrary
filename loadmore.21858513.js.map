{"mappings":"AACA,MAAMA,EAAW,CACfC,UAAWC,SAASC,cAAc,kBAClCC,QAASF,SAASC,cAAc,kBAI5BE,EAEG,kBAFHA,EAGE,aAHFA,EAIK,QAIX,IAAIC,EAAO,EAoBX,SAASC,EAAaC,GACpB,OAAOA,EACJC,KACC,EAACC,YACCA,EAAWC,eACXA,EAAcC,aACdA,EAAYC,aACZA,KACI,+CAEDH,EACI,kCAAoCA,EACpC,0BACIC,GAAkBN,2DAEnBM,GAAkBN,wCACLO,GAAgBP,uCAChBQ,GAAgBR,wCAI1CS,KAAK,G,CAIV,SAASC,EAAaC,EAAc,KAClC,MAAMC,EAAS,IAAIC,gBAAgB,CACjCC,KAAMH,EACNI,QAAS,qCAEX,OAAOC,MAAM,oDAAoDJ,KAC9DK,MAAKC,IACJ,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAM,SAElB,OAAOF,EAAKG,MAAM,IAEnBC,OAAMC,IACLC,QAAQC,IAAIF,GACZ5B,EAASI,QAAQ2B,UAAUC,QAAQ,YAAa,mBAAmB,G,CAxDzEhC,EAASI,QAAQ6B,iBAAiB,SAGlC,WACE3B,GAAQ,EACRS,EAAaT,GAAMgB,MAAKY,IACtBlC,EAASC,UAAUkC,mBACjB,YACA5B,EAAa2B,EAAKE,UAEhBF,EAAKf,MAAQe,EAAKG,aACpBrC,EAASI,QAAQ2B,UAAUC,QAAQ,YAAa,mBAAmB,G,IAkDzEjB,IACGO,MAAKY,IACJL,QAAQC,IAAII,GACZlC,EAASC,UAAUkC,mBACjB,YACA5B,EAAa2B,EAAKE,UAGhBF,EAAKf,KAAOe,EAAKG,aACnBrC,EAASI,QAAQ2B,UAAUC,QAAQ,mBAAoB,YAAY,IAGtEL,OAAMC,IACLC,QAAQC,IAAIF,GACZ5B,EAASI,QAAQ2B,UAAUC,QAAQ,YAAa,mBAAmB","sources":["src/js/loadmore.js"],"sourcesContent":["// Elements object\nconst elements = {\n  container: document.querySelector('.js-movie-list'),\n  loadBtn: document.querySelector('.js-load-more'),\n};\n\n// Default markup values object\nconst defaults = {\n  poster: 'https://www.reelviews.net/resources/img/default_poster.jpg',\n  title: 'Title not found',\n  date: 'XXXX-XX-XX',\n  average: 'XX.XX',\n};\n\n// Variable for backend page number\nlet page = 1;\n\n// Listener on a button\nelements.loadBtn.addEventListener('click', handlerLoadMore);\n\n// Callback function when clicking the LoadMore button, request to the backend, rendering markup\nfunction handlerLoadMore() {\n  page += 1;\n  serviceFilms(page).then(data => {\n    elements.container.insertAdjacentHTML(\n      'beforeend',\n      createMarkup(data.results)\n    );\n    if (data.page >= data.total_pages) {\n      elements.loadBtn.classList.replace('load-more', 'load-more-hidden');\n    }\n  });\n}\n\n// Markup function\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({\n        poster_path,\n        original_title,\n        release_date,\n        vote_average,\n      }) => `<li class=\"movie-card\">\n         <img src=\"${\n           poster_path\n             ? 'https://image.tmdb.org/t/p/w300' + poster_path\n             : 'default.poster'\n         }\" alt=\"${original_title || defaults.title}\">\n         <div class=\"movie-info\">\n            <h2>${original_title || defaults.title}</h2>\n            <p>Release Date: ${release_date || defaults.date}</p>\n            <p>Vote Average: ${vote_average || defaults.average}</p>\n         </div>\n      </li>`\n    )\n    .join('');\n}\n\n// Function for backend request\nfunction serviceFilms(currentPage = '1') {\n  const params = new URLSearchParams({\n    page: currentPage,\n    api_key: '345007f9ab440e5b86cef51be6397df1',\n  });\n  return fetch(`https://api.themoviedb.org/3/trending/movie/week?${params}`)\n    .then(resp => {\n      if (!resp.ok) {\n        throw new Error('Error');\n      }\n      return resp.json();\n    })\n    .catch(err => {\n      console.log(err);\n      elements.loadBtn.classList.replace('load-more', 'load-more-hidden');\n    });\n}\n\n// Calling the serviceFilms() function, first loading, rendering markup\nserviceFilms()\n  .then(data => {\n    console.log(data);\n    elements.container.insertAdjacentHTML(\n      'beforeend',\n      createMarkup(data.results)\n    );\n    // Show the button if the number of the displayed page is less than the number of backend pages\n    if (data.page < data.total_pages) {\n      elements.loadBtn.classList.replace('load-more-hidden', 'load-more');\n    }\n  })\n  .catch(err => {\n    console.log(err);\n    elements.loadBtn.classList.replace('load-more', 'load-more-hidden');\n  });\n"],"names":["$164d85bbd1232149$var$elements","container","document","querySelector","loadBtn","$164d85bbd1232149$var$defaults","$164d85bbd1232149$var$page","$164d85bbd1232149$var$createMarkup","arr","map","poster_path","original_title","release_date","vote_average","join","$164d85bbd1232149$var$serviceFilms","currentPage","params","URLSearchParams","page","api_key","fetch","then","resp","ok","Error","json","catch","err","console","log","classList","replace","addEventListener","data","insertAdjacentHTML","results","total_pages"],"version":3,"file":"loadmore.21858513.js.map"}